System.register("chunks:///_virtual/Animal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./PressedItem.ts","./Enums.ts","./Managers.ts"],(function(t){var e,i,a,n,o,s,r,h,c,l,m,g,u,d,f,v,y,_,p,F;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.Node,h=t.Label,c=t.js,l=t.tween,m=t.v3,g=t.UITransform,u=t.v2,d=t.Vec2},function(t){f=t.cf},function(t){v=t.PressedItem},function(t){y=t.OwnerEnum,_=t.AnimalGenderEnum,p=t.PropertysEnum},function(t){F=t.mg}],execute:function(){var k,M,A,V,w;o._RF.push({},"5e801fJRONGG7hef2BI5nVL","Animal",void 0);var x=s.ccclass,S=s.property;t("Animal",(k=x("Animal"),M=S(r),k((w=e((V=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,a(e,"sickNode",w,n(e)),e.age=0,e.sickValue=0,e.hungryValue=0,e.className="Animal",e.gender=0,e.room=null,e._data=f.animal,e.owner=y.Player,e.originPos=null,e.weight=1,e._movementVec=null,e._natrualDeathAge=1/0,e._moveTimer=0,e.weightFactor=50,e.sickFactor=50,e.consumeFactor=50,e.adultFactor=50,e}i(e,t),e.inheriteProperty=function(t,e){return{weightFactor:f.getRandomInterval(t.weightFactor,e.weightFactor),sickFactor:f.getRandomInterval(t.sickFactor,e.sickFactor),consumeFactor:f.getRandomInterval(t.consumeFactor,e.consumeFactor),adultFactor:f.getRandomInterval(t.adultFactor,e.adultFactor)}};var o=e.prototype;return o.start=function(){t.prototype.start.call(this),this.type="Animal",this.sickNode.active=this.sickValue>0,this._natrualDeathAge=f.normalDistribution(this._data.naturalDeathAge,this._data.naturalDeathFinalAge)},o.onDragBegan=function(t){this.isDraging=!0,this.originPos=this.node.getWorldPosition()},o.onDrag=function(t){this.owner==y.Player&&F.eventManager.emit(f.eventType.ON_DRAG_ANIMAL,this.node,t),t.propagationStopped=!0},o.onDragEnd=function(){this.owner==y.Player&&F.eventManager.emit(f.eventType.ON_DRAG_ANIMAL_END,this)},o.ShowInfo=function(t){var e=t.getChildByName("SaleBtn"),i=e.getChildByName("Label").getComponent(h),a=t.getChildByName("InfoLabel").getComponent(h),n=f.langs[this.className],o=this.gender==_.Male?f.langs.Male:f.langs.Female,s=this.sickValue>0?c.formatStr(f.langs.sickstr,this.sickValue):f.langs.health;this.hungryValue>0&&f.langs.Hungry;var r=this.owner==y.Market?f.langs.Market:f.langs.Player,l=this.age+" "+(this.isAdult()?f.langs.Adult:f.langs.Baby),m=c.formatStr(f.langs.animalInfo,n,o,l,this.weight.toFixed(2),this.getPrice(),s,r);if(this.room&&this.room.getIsCrowded()&&(m+="/n"+f.langs.crowdedStr),m+=this.getExtraInfo(),e.off("click"),this.owner==y.Market){var g=this.getPrice();i.string=f.langs.Buy,e.on("click",(function(){F.propertyItems.deductFunds(g,c.formatStr(f.langs.shopping,f.langs[this.className]))&&(this.owner=y.Player,F.uiManager.showToast(f.langs.boughtAnimalTip))}),this)}else e.on("click",this.onSale,this),i.string=f.langs.Sale;a.string=m},o.getExtraInfo=function(){return""},o.getGainWeightByFacts=function(){return 0},o.getConsumeByGain=function(t){return 0},o.gainWeight=function(t){this.weight+=t},o.gainExcrement=function(t){var e=2*t/3;this.room.gainExcrement(e)},o.setSick=function(t){this.sickNode.active=t,this.sickValue=t?1:0},o.setAge=function(t){this.age=t},o.addAge=function(){this.age++,this.sickValue>0&&this.sickValue++},o.isAdult=function(){var t=Math.ceil(this.adultFactor/100*(this._data.adultAge-this._data.adultAgeMin))+this._data.adultAgeMin;return this.age>=t},o.getPrice=function(){var t=this.isAdult()?this.className:"Baby"+this.className,e=f.marketPrice[t]*this.weight;return e=this.sickValue>0?e*f.sickAnimalPriceRate:e,parseFloat(e.toFixed(1))},o.setAll=function(t,e,i,a,n,o){void 0===i&&(i=!1),this.gender=o||Math.random()<.5?_.Male:_.Female,this.setAge(n||0),this.owner=t,this.setSick(i),this.weight=a||(this._data.birthWeightMax-this._data.birthWeightMin)*e.weightFactor/100+this._data.birthWeightMin,this.weightFactor=e.weightFactor,this.sickFactor=e.sickFactor,this.consumeFactor=e.consumeFactor,this.adultFactor=e.adultFactor},o.naturalDeath=function(){return this.age>=this._natrualDeathAge},o.removeFromRoom=function(){this.room&&(this.room.removeAnimal(this),l(this.node).to(1,{scale:m(0,0,0)},{easing:"quadOut"}).destroySelf().start())},o.onSale=function(){this.owner==y.Player&&(this.removeFromRoom(),F.propertyItems.addFunds(this.getPrice(),f.langs.salePig))},o.dealWithRound=function(){var t=this.getGainWeightByFacts(),e=this.getConsumeByGain(t);e*=.8+this.consumeFactor/250,this.gainExcrement(e-t);var i=this.className+"Fodder";if(F.propertyItems.deducItem(p[i],e))this.sickValue<=0&&(this.gainWeight(t),this.hungryValue=0);else if(this.hungryValue++,this.hungryValue>3){var a=f.getRatebyMedian(this.hungryValue,this._data.hungryMedianRound);if(Math.random()<a){var n=this.room?c.formatStr(f.langs.deadofHungry,this.room.roomId):"";return F.eventManager.emit(f.eventType.ON_SHOW_LOG,n),void this.removeFromRoom()}}if(this.addAge(),this.naturalDeath()){var o=this.room?c.formatStr(f.langs.deadofNatural,this.room.roomId):"";return F.eventManager.emit(f.eventType.ON_SHOW_LOG,o),void this.removeFromRoom()}if(this.sickValue>0){var s=f.getRatebyMedian(this.sickValue,this._data.sickMedianRound);if(Math.random()<s){if(s=this.sickFactor/100*.7+.3*Math.random(),!(Math.random()<s)){var r=this.room?c.formatStr(f.langs.deadofSick,this.room.roomId):"";return F.eventManager.emit(f.eventType.ON_SHOW_LOG,r),void this.removeFromRoom()}this.setSick(!1)}}else this.getSick()},o.getSick=function(){var t=this._data.naturalSickRate;if(this.room){for(var e=this.room.animalList,i=0;i<e.length;i++){var a=e[i];a!==this&&a.sickValue>3&&(t+=this._data.getSickBySickRate)}t+=.03*this.room.getIsCrowded()}t*=1-this.sickFactor/200,console.log("生病概率：",t),Math.random()<t&&this.setSick(!0)},o.update=function(t){if(this.room&&!this.isDraging){for(var e=this.getComponent(g).getBoundingBoxToWorld(),i=0,a=0,n=0;n<this.room.animalList.length;n++){var o=this.room.animalList[n];if(o!==this&&!o.isDraging){var s=o.getComponent(g).getBoundingBoxToWorld();e.intersects(s)&&(e.x<s.x&&i--,e.x>s.x&&i++,e.y<s.y&&a--,e.y>s.y&&a++)}}if(!i&&!a)if(this._movementVec){var r=10*t;if(this._movementVec.length()<=r)i=this._movementVec.x,a=this._movementVec.y,this._movementVec=null;else{var h=r/this._movementVec.length();i=this._movementVec.x*h,a=this._movementVec.y*h,this._movementVec.subtract(u(i,a))}}else if(this._moveTimer<=0)this._moveTimer=3*Math.random()+3;else if(this._moveTimer-=t,this._moveTimer<=0){var c=10+Math.floor(40*Math.random()),l=Math.random();if(l<.166)this._movementVec=u(c,0);else if(l<.333)this._movementVec=u(-c,0);else if(l<.5)this._movementVec=u(0,c);else if(l<.666)this._movementVec=u(0,-c);else{var f=u();d.random(f).normalize(),f.x*=c,f.y*=c,this._movementVec=f}}var v=this.node.getWorldPosition(),y=this.node.getComponent(g),_=this.room.getActiveRect();_.x+=y.width/2,_.y+=y.height/2,_.width-=y.width,_.height-=y.height,v.x+i<_.x&&(i=_.x-v.x),v.x+i>_.xMax&&(i=_.xMax-v.x),v.y+a<_.y&&(a=_.y-v.y),v.y+a>_.yMax&&(a=_.yMax-v.y),this.node.translate(m(i,a))}},e}(v)).prototype,"sickNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=V))||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,a,r,s,o,c,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Node,c=t.Input,u=t.tween,l=t.v3,p=t.Component}],execute:function(){var h,f,y,d,v,g,b;r._RF.push({},"275b8EQ4RxP3o6JPZstcYKZ","BaseLayer",void 0);var B=s.ccclass,m=s.property;t("BaseLayer",(h=B("BaseLayer"),f=m(o),y=m(o),h((g=e((v=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(e,"mask",g,a(e)),i(e,"adjustBg",b,a(e)),e}n(e,t);var r=e.prototype;return r.start=function(){this.mask.on(c.EventType.TOUCH_END,this.hide,this)},r.onDestroy=function(){this.mask.off(c.EventType.TOUCH_END,this.hide,this)},r.hide=function(){var t=this;u(this.adjustBg).set({scale:l(1,1,1)}).to(.3,{scale:l(0,0,0)},{easing:"backIn"}).call((function(){t.node.active=!1})).start()},r.show=function(){this.node.active=!0,u(this.adjustBg).set({scale:l(0,0,0)}).to(.3,{scale:l(1,1,1)},{easing:"backOut"}).start()},e}(p)).prototype,"mask",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(v.prototype,"adjustBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Calendar.ts",["cc","./Config.ts","./Enums.ts"],(function(r){var e,t,n,a,s,u;return{setters:[function(r){e=r.cclegacy,t=r._decorator,n=r.js},function(r){a=r.cf},function(r){s=r.SeasonEnum,u=r.WeatherEnum}],execute:function(){var c,o;e._RF.push({},"8c490I6IyVME7E1sOY9ltfD","Calendar",void 0);var i=t.ccclass,h=(t.property,i("Calendar")(((o=function(){function r(){return this.currentDate=void 0,this.currentSeason=void 0,this.currentWeather=void 0,r._instance||(r._instance=this,this.init()),r._instance}var e=r.prototype;return e.init=function(){this.currentDate=new Date(2e3,0,1),this.currentSeason=s.Spring,this.currentWeather=u.Sunny},e.getCurrentDate=function(){var r=this.currentDate.getMonth()+1,e=this.currentDate.getDate();return n.formatStr(a.langs.dateStr,r,e)},e.getCurrenWeather=function(){return this.currentWeather},e.increaseDate=function(){var r=this.currentDate.getFullYear(),e=this.currentDate.getMonth(),t=this.currentDate.getDate()+1;this.currentDate=new Date(r,e,t),11===e&&31===t?(this.currentDate=new Date(r+1,0,1),this.currentSeason=0):1===t&&(this.currentSeason=(this.currentSeason+1)%4),this.simulateWeather()},e.isDateInRange=function(r,e,t,n){var a=this.currentDate.getMonth(),s=this.currentDate.getDate();return a>r&&a<t||(a===r&&s>=e||a===t&&s<=n)},e.getCurrentSeason=function(){return this.currentSeason},e.getSolarTerm=function(){switch(this.currentDate.getMonth()+1+"."+this.currentDate.getDate()){case"1.6":return a.solarTerm[0];case"1.20":return a.solarTerm[1];case"2.4":return a.solarTerm[2];case"2.19":return a.solarTerm[3];case"3.5":return a.solarTerm[4];case"3.20":return a.solarTerm[5];case"4.4":return a.solarTerm[6];case"4.19":return a.solarTerm[7];case"5.5":return a.solarTerm[8];case"5.20":return a.solarTerm[9];case"6.5":return a.solarTerm[10];case"6.21":return a.solarTerm[11];case"7.6":return a.solarTerm[12];case"7.22":return a.solarTerm[13];case"8.7":return a.solarTerm[14];case"8.22":return a.solarTerm[15];case"9.7":return a.solarTerm[16];case"9.22":return a.solarTerm[17];case"10.8":return a.solarTerm[18];case"10.23":return a.solarTerm[19];case"11.7":return a.solarTerm[20];case"11.22":return a.solarTerm[21];case"12.6":return a.solarTerm[22];case"12.21":return a.solarTerm[23];default:return""}},e.simulateWeather=function(){var r=.2,e=.2,t=.6,n=.3;if(this.currentSeason==s.Spring?(r=.3,t=.5,n=.2):this.currentSeason==s.Summer?(r=.3,e=.1,n=.4):(this.currentSeason=s.Autumn)?(r=.1,t=.7):(this.currentSeason=s.Winter)&&(r=.1,t=.4),Math.random()<n){var a=Math.random();this.currentWeather=a<t?u.Sunny:a<r+t?u.Rainy:a<e+r+t?u.Cloudy:u.Snowy}},r}())._instance=void 0,c=o))||c);r("calendar",new h);e._RF.pop()}}}));

System.register("chunks:///_virtual/Chicken.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Animal.ts","./Enums.ts","./Managers.ts"],(function(t){var i,e,n,s,o,a,r,h;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.cf},function(t){o=t.Animal},function(t){a=t.AnimalGenderEnum,r=t.SeasonEnum},function(t){h=t.mg}],execute:function(){var c;e._RF.push({},"81758SkF31DqLtqA1q16ie5","Chicken",void 0);var l=n.ccclass;n.property,t("Chicken",l("Chicken")(c=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(i=t.call.apply(t,[this].concat(n))||this).layEggFactor=50,i.layedEgg=!1,i.isNesting=!1,i._data=s.chicken,i.className="Chicken",i.room=null,i}i(e,t);var n=e.prototype;return n.start=function(){t.prototype.start.call(this)},n.getGainWeightByFacts=function(){var t=this.age,i=(Math.max(0,this.weightFactor),0),e=(Math.min(100,this.weightFactor)-50)/50*s.getRandomInterval(.05,.1);return this.gender==a.Male?t<=180?i=3/180*(1+e)+(t-90)/18e3:t<365&&(i=2/185*(1+e)):t<90?i=.0022*(1+e):t<180?i=.0047*(1+e):t<270&&(i=.0124*(1+e)),i},n.getConsumeByGain=function(t){return this.gender==a.Female?5*t/1+.25:5*t/1},n.getPrice=function(){var t;return t=this.isAdult()?s.marketPrice.Chicken*this.weight:s.marketPrice.BabyChicken,t=this.sickValue>0?t*s.sickAnimalPriceRate:t,parseFloat(t.toFixed(1))},n.setNesting=function(t,i){this.room.nestChicken[i]=t?this:null,this.isNesting=!0,this.node.setWorldPosition(this.room.coops[i].getWorldPosition())},n.dealWithRound=function(){if(t.prototype.dealWithRound.call(this),this.isAdult()&&this.sickValue<=0&&this.hungryValue<=0){for(var i=this.room.animalList,e=[],n=0;n<i.length;n++)i[n].gender==a.Male&&e.push(i[n]);if(!this.isNesting&&h.calendar.getCurrentSeason()!=r.Winter){var s=.1;if(s+=.05*e.length,Math.random()<s){for(var c=[],l=0;l<this.room.coops.length;l++){this.room.coops[l].children.length>5&&!this.room.nestChicken[l]&&c.push[l]}if(c.length>0){var g=Math.floor(Math.random()*c.length);this.setNesting(!0,g)}}}if(this.isNesting||this.layedEgg&&!(Math.random()<this.layEggFactor/100))this.layedEgg=!1;else{var u=null;if(e.length>0){var d=Math.floor(Math.random()*e.length);u=o.inheriteProperty(this,e[d])}this.room.addEgg(u),this.layedEgg=!0}}},n.update=function(i){this.isNesting||t.prototype.update.call(this,i)},e}(o))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/ChickenEgg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Managers.ts","./Config.ts","./Chicken.ts"],(function(e){var n,t,i,r,o,a,s,h,c,l,u,g,d,f,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,h=e.Input,c=e.Component},function(e){l=e.WorkTypeEnum,u=e.OwnerEnum,g=e.SeasonEnum},function(e){d=e.mg},function(e){f=e.cf},function(e){p=e.Chicken}],execute:function(){var m,y,k,v,C;o._RF.push({},"bbdd4BDNflFb4PE0BdS7FAM","ChickenEgg",void 0);var E=a.ccclass,S=a.property;e("ChickenEgg",(m=E("ChickEgg"),y=S(s),m((C=n((v=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"hand",C,r(n)),n.room=null,n.gene=null,n.freshVal=1,n.nestRound=0,n}t(n,e);var o=n.prototype;return o.start=function(){this.hand.active=!1,this.node.on(h.EventType.TOUCH_END,this.onClicked,this)},o.onDestroy=function(){this.node.off(h.EventType.TOUCH_END,this.onClicked,this)},o.onClicked=function(e){e.getUIStartLocation().x==e.getUILocation().x&&e.getUIStartLocation().y==e.getUILocation().y&&this.room&&(this.hand.active?(this.hand.active=!1,d.workflow.deleteWorkByTypeAndTarget(l.GatheringEggs,this)):(this.hand.active=!0,d.workflow.putInWorkflow(l.GatheringEggs,0,null,this.onGathered,this))),e.propagationStopped=!0},o.onGathered=function(){this.hand.active=!1,this.room=null,d.eventManager.emit(f.eventType.ON_GATHERING_ITEM,this.node)},o.dealWithRound=function(){if(!(this.freshVal<=0))if(this.gene&&this.room.isNesting(this.node.parent)){this.nestRound++;var e=f.getRandomInterval(f.chicken.nestDaymin,f.chicken.nestDayMax);if(this.nestRound>=e){var n=d.uiManager.getInstantByName("Chicken").getComponent(p);d.eventManager.emit(f.eventType.ON_ADD_ANIMAL,n),this.room.addAnimal(n),this.room.putAnimalInto(n),n.setAll(u.Player,this.gene,!1),this.destroy()}}else d.calendar.getCurrentSeason()==g.Winter?this.freshVal-=1/f.chicken.eggFreshdayWinter:d.calendar.getCurrentSeason()==g.Autumn?this.freshVal-=1/f.chicken.eggFreshdayAutumn:d.calendar.getCurrentSeason()==g.Spring?this.freshVal-=1/f.chicken.eggFreshdaySpring:d.calendar.getCurrentSeason()==g.Summer&&(this.freshVal-=1/f.chicken.eggFreshdaySummer),this.freshVal},n}(c)).prototype,"hand",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=v))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChickenRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts","./ChickenEgg.ts","./Managers.ts","./Config.ts"],(function(o){var t,n,e,i,c,r,s;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator},function(o){i=o.Room},function(o){c=o.ChickenEgg},function(o){r=o.mg},function(o){s=o.cf}],execute:function(){var a;n._RF.push({},"538f4IRmtdAS72NMQpBJM5L","ChickenRoom",void 0);var h=e.ccclass;e.property,o("ChickenRoom",h("ChickenRoom")(a=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(t=o.call.apply(o,[this].concat(e))||this).animalList=[],t.className="ChickenRoom",t.AnimalName="Chicken",t.coops=[],t.nestChicken=null,t._data=s.ChickenRoom,t}t(n,o);var e=n.prototype;return e.start=function(){for(var t=0;t<2;t++)this.coops[t]=this.node.getChildByName("coop"+(t+1));o.prototype.start.call(this)},e.isNesting=function(o){for(var t=0;t<this.coops.length;t++)if(o===this.coops[t]&&this.nestChicken[t])return!0;return!1},e.addEgg=function(o){console.log("Room addEgg");var t=r.uiManager.getInstantByName("ChickenEgg"),n=t.getComponent(c);n.room=this,(Math.random()<.5?this.coops[0]:this.coops[1]).addChild(t);var e=Math.floor(60*Math.random())+15,i=Math.floor(50*Math.random())+30;t.setPosition(e,i),n.gene=o||null,console.log(n)},e.dealWithRound=function(){o.prototype.dealWithRound.call(this);for(var t=0;t<2;t++)for(var n=0;n<this.coops[t].children.length;n++){this.coops[t].children[n].getComponent(c).dealWithRound()}},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"72a66IWJltO74xLR7/hh8ye","Config",void 0);e("cf",{eventType:{ON_PRESSED_ITEM:"on_pressed_item",ON_SHOW_LOG:"on_show_log",ON_DRAG_ANIMAL:"on_drag_animal",ON_DRAG_ANIMAL_END:"on_drag_animal_end",ON_ITEM_DESTROY:"on_item_destroy",ON_ADD_ANIMAL:"on_add_animal",ON_UPDATE_PROPERTYITEM:"on_update_propertyitem",ON_GATHERING_ITEM:"on_gathering_item"},map:{TileWidth:50,TileHeight:50,ChickenRoom:{x:6,y:6},PigRoom:{x:6,y:6},Farmland:{x:1,y:1}},plant:{eggPlant:{lifespanMin:150,lifespanMax:195,maturcityMin:60,maturcityMax:75,fruitWeightMax:.3,fruitWeightMin:.2,fruitMaturcityMax:70,fruitMaturcityMin:50,fruitGetSeedsMax:14,fruitGetSeedsMin:7,fruitCountTotalMax:25,fruitCountTotalMin:15}},trufflePrice:1,maxTruffleInSingleRoom:4,roomUpgradNeeds:10,sickAnimalPriceRate:.5,marketPrice:{PigRoom:10,Pig:16,BabyPig:20,ChickenRoom:5,Chicken:20,BabyChicken:3,PigFodder:3.5,ChickenFodder:2.3,EggPlantSeed:5},marketData:{sickPigRate:.1,Pig:{refreshCountMin:3,refreshCountMax:6},Chicken:{refreshCountMin:5,refreshCountMax:10}},Farmland:{workHours:7200,fertilizeHours:60,waterHours:30,moistureChangeCloudy:-5,moistureChangeSnowy:30,moistureChangeSunny:-30,moistureByPlant:5,fertilityByPlant:1},animal:{adultAge:3,adultAgeMin:3,naturalDeathAge:8,naturalDeathFinalAge:15,naturalSickRate:.01,getSickBySickRate:.5,sickMedianRound:2,hungryMedianRound:4,birthWeightMin:0,birthWeightMax:0},pig:{adultAge:365,adultAgeMin:153,naturalDeathAge:4380,naturalDeathFinalAge:5475,naturalSickRate:.01,getSickBySickRate:.5,sickMedianRound:10,hungryMedianRound:10,birthWeightMin:1,birthWeightMax:1.8,deleveryPeriodMax:120,deleveryPeriodMim:110,lactationPeriodMax:60,lactationPeriodMin:45,pregnantRate:.2,deliveryCountMin:3,deliveryCountMax:15},chicken:{adultAge:18,adultAgeMin:12,naturalDeathAge:1095,naturalDeathFinalAge:1825,naturalSickRate:.01,getSickBySickRate:.5,sickMedianRound:7,hungryMedianRound:10,birthWeightMin:.1,birthWeightMax:.25,nestDayMax:21,nestDaymin:19,eggFreshdayWinter:15,eggFreshdaySpring:13,eggFreshdayAutumn:13,eggFreshdaySummer:10},Room:{maxAnimalCount:12,woodBuildHour:28800,cementBuildHour:86400,baseBuildHour:57600,woodBuildPrice:30,cementBuildPrice:100,basePrice:0,cleanWorkHour:900},PigRoom:{maxAnimalCount:12,woodBuildHour:28800,cementBuildHour:86400,baseBuildHour:57600,woodBuildPrice:30,cementBuildPrice:100,basePrice:50,cleanWorkHour:1200},ChickenRoom:{maxAnimalCount:12,woodBuildHour:28800,cementBuildHour:86400,baseBuildHour:57600,woodBuildPrice:30,cementBuildPrice:100,basePrice:20,cleanWorkHour:600},seasons:["春季","夏季","秋季","冬季"],weather:["晴天","下雨","阴天","下雪"],solarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],langs:{vacantInfo:"尚未购买！是否花费%s购置此猪圈?",selectBuildContentStr:"请选择需要建造的内容",buildContentStr:"已选择%s,请在地图选择合适位置建造",sickstr:"生病%s天了",farmlandInfo:"耕地，可以种植植物。\n肥沃度：%s\n湿度：%s",animalInfo:"%s\n性别：%s\n年龄：%s\n体重：%s千克\n价格：%s\n健康状况：%s\n归属：%s\n",roomInfo:"%s,已购置%s轮,拥有%s只动物",plantInfo:"%s\n成长天数:%s",shopping:"购买%s",salePig:"出售猪",saleTruffle:"出售松露",deductFunds:" 扣除资金：%s",addFunds:" 增加资金：%s",nextRound:"进入下一天。。。。。。",deadofSick:"%s猪圈内 猪死于疾病",deadofHungry:"%s畜舍，动物死于饥饿",deadofNatural:"%s猪圈内 猪自然死亡",geneMutationStr:"%s猪圈内 猪获得一条突变：%s",truffleFull:"%s猪圈，松露已满",pigConsumStr:"本轮消耗资金：%s",maxLevelStr:"已经达到最高等级",lackofFundsStr:"资金不足",lackofSeedStr:"种子不足",upgradRoomStr:"升级猪圈，",consumeFundStr:"本轮需消耗%s资金，缺少资金将导致猪死亡，是否确定进入下一天？",boughtAnimalTip:"已经购买该动物，请拖到自己的畜舍",pregnantStr:"怀孕%s天了",dateStr:"%s月%s日",buyingCountReplace:"请输入购买量",buyingButtonText:"购买 %s %s",lackFodderTip:"%s不足，请注意补充！",crowdedStr:"过于拥挤，会导致容易生病",MarketRoom:"归属：市场",chooseMaterial:"选择材料",workProcessing:"该工作已经在进行中",fund:"资金",piece:"个",Kilogram:"千克",HundredGrain:"百颗",WorkHour:"工时",Farmland:"耕地",Market:"市场",Player:"玩家",PigFodder:"猪饲料",ChickenFodder:"鸡饲料",Room:"畜舍",PigRoom:"猪圈",ChickenRoom:"鸡舍",Animal:"动物",Pig:"猪",Chicken:"鸡",ChickenEgg:"鸡蛋",EggPlant:"茄子",EggPlantSeed:"茄子种子",Fertilizer:"肥料",Female:"雌性",health:"健康",Male:"雄性",Baby:"幼崽",Buy:"购买",Adult:"已成年",Hungry:"饥饿",Clean:"打扫",Water:"浇水",Build:"建造",Upgrade:"升级",Sale:"出售",Plant:"种植",BuildBase:"修建地基",CancelBase:"取消修建地基",CancelBuild:"取消建造",TearDown:"拆除",Fertilize:"施肥",Cancel:"取消",Remove:"移除",nextDay:"进入下一天",wood:"木头",cement:"水泥"},getRandomInterval:function(e,a){var n;return n=a>e?Math.random()*(a-e)+e:Math.random()*(e-a)+a,Number.isInteger(e)&&Number.isInteger(a)&&(n=Math.floor(n)),n},normalDistribution:function(e,a){for(var n=0,t=0,i=(e+a)/2,r=(a-e)/6;0===n;)n=Math.random();for(;0===t;)t=Math.random();var o=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*t),u=Math.floor(i+r*o);return Math.min(Math.max(u,e),a)},getRatebyMedian:function(e,a){return e/(a*(a+1)/2)},getNumByFactor:function(e,a,n){var t=n-a;return Math.round(t*e/100)+a}});a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"1ce99oeQbNMs4rMARxwaBbr","Enums",void 0);var r=e("QualityLevelEnum",function(e){return e[e.Normal=0]="Normal",e[e.Silver=1]="Silver",e[e.Gold=2]="Gold",e[e.Iridium=3]="Iridium",e}(r||{})),t=e("AnimalGenderEnum",function(e){return e[e.Male=0]="Male",e[e.Female=1]="Female",e}(t||{})),i=e("OwnerEnum",function(e){return e[e.Market=0]="Market",e[e.Player=1]="Player",e}(i||{})),u=e("WeatherEnum",function(e){return e[e.Sunny=0]="Sunny",e[e.Rainy=1]="Rainy",e[e.Cloudy=2]="Cloudy",e[e.Snowy=3]="Snowy",e}(u||{})),a=e("SeasonEnum",function(e){return e[e.Spring=0]="Spring",e[e.Summer=1]="Summer",e[e.Autumn=2]="Autumn",e[e.Winter=3]="Winter",e}(a||{})),l=e("WorkTypeEnum",function(e){return e[e.Build=0]="Build",e[e.Reclamation=1]="Reclamation",e[e.Fertilize=2]="Fertilize",e[e.Water=3]="Water",e[e.Cleaning=4]="Cleaning",e[e.GatheringEggs=5]="GatheringEggs",e[e.RemovePlant=6]="RemovePlant",e}(l||{})),o=e("PropertysEnum",function(e){return e.PigFodder="PigFodder",e.ChickenFodder="ChickenFodder",e.EggPlantSeed="EggPlantSeed",e.Fertilizer="Fertilizer",e}(o||{}));n._RF.pop()}}}));

System.register("chunks:///_virtual/Farmland.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Plant.ts","./PressedItem.ts","./Config.ts","./Managers.ts","./Enums.ts"],(function(t){var e,n,i,r,a,l,o,s,u,d,h,f,c,m,g,p,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.log,s=t.js,u=t.Label,d=t.ToggleContainer},function(t){h=t.Plant},function(t){f=t.PressedItem},function(t){c=t.cf},function(t){m=t.mg},function(t){g=t.PropertysEnum,p=t.WeatherEnum,y=t.WorkTypeEnum}],execute:function(){var I,w,x,C;a._RF.push({},"03ec7uA075FMptvdT7l9i8R","Farmland",void 0);var F=l.ccclass,b=l.property;t("Farmland",F("Farmland")((x=e((w=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).plant=null,i(e,"fertility",x,r(e)),i(e,"moisture",C,r(e)),e.type="Farmland",e.buildIndex=0,e.fertilizeIndex=0,e.waterIndex=0,e}n(e,t);var a=e.prototype;return a.start=function(){t.prototype.start.call(this),this.type="Farmland"},a.onDestroy=function(){this.buildIndex>0&&m.workflow.deleteWorkByIndex(this.buildIndex),t.prototype.onDestroy.call(this)},a.plantSeed=function(t){if(this.plant)o("ERROR: 已经种植了");else{var e=m.propertyItems.getPlantSeed(t);if(e){var n=t.replace("Seed",""),i=m.uiManager.getInstantByName(n),r=i.getComponent(h);this.node.addChild(i),i.setPosition(0,28),r.genes=e.gene,this.plant=r,r.land=this,r.plantName=n,o(r)}else m.uiManager.showToast(c.langs.lackofSeedStr)}},a.getFarmFactor=function(){return.5*Math.min(this.fertility/50,1)+.5*Math.min(this.moisture/50,1)},a.water=function(){this.moisture=100,this.waterIndex=0},a.onDoneFertilize=function(){this.fertility+=50,this.fertility>100?this.fertility=100:this.fertility<0&&(this.fertility=0),this.fertilizeIndex=0},a.onFertilize=function(){return m.propertyItems.deducItem(g.Fertilizer,1)},a.removePlant=function(){this.plant.destroy(),this.plant=null},a.dealWithRound=function(){this.buildIndex>0||(this.plant&&(this.plant.dealWithRound(),this.plant.getIsWithered()||(this.moisture-=c.Farmland.moistureByPlant,this.fertility-=c.Farmland.fertilityByPlant)),m.calendar.getCurrenWeather()==p.Rainy?this.moisture=100:m.calendar.getCurrenWeather()==p.Cloudy?this.moisture+=c.Farmland.moistureChangeCloudy:m.calendar.getCurrenWeather()==p.Snowy?this.moisture+=c.Farmland.moistureChangeSnowy:m.calendar.getCurrenWeather()==p.Sunny&&(this.moisture+=c.Farmland.moistureChangeSunny),this.moisture=Math.max(0,this.moisture))},a.ShowInfo=function(t){var e=this,n=this,i=s.formatStr(c.langs.farmlandInfo,this.fertility,this.moisture);t.getChildByName("InfoLabel").getComponent(u).string=i;for(var r="",a=t.getChildByName("ToggleSeeds").getComponent(d).activeToggles(),l=function(){var t=a[o],n=t.node.name;t.node.off("toggle"),t.node.on("toggle",(function(){r=n}),e),t.isChecked&&(r=n);var i=c.langs[n]+m.propertyItems.getItemQuatity(g[n]);a[o].node.getChildByName("Label").getComponent(u).string=i},o=0;o<a.length;o++)l();var h=t.getChildByName("Btn1"),f=t.getChildByName("Btn2"),p=function(){var e=n.fertilizeIndex>0?c.langs.Cancel+c.langs.Fertilize:c.langs.Fertilize;t.getChildByPath("Btn1/Label").getComponent(u).string=e},I=function(){var e;e=0==n.buildIndex?n.plant?n.waterIndex>0?c.langs.Cancel+c.langs.Water:c.langs.Water:c.langs.Plant:c.langs.CancelBuild,t.getChildByPath("Btn2/Label").getComponent(u).string=e};f.off("click"),f.on("click",(function(){this.buildIndex>0?this.node.destroy():this.plant?this.waterIndex>0?m.workflow.deleteWorkByIndex(this.waterIndex)&&(this.waterIndex=0):this.waterIndex=m.workflow.putInWorkflow(y.Water,c.Farmland.waterHours,null,this.water,this):this.plantSeed(r),I()}),this),I(),h.active=0==this.buildIndex,0==this.buildIndex&&(h.off("click"),h.on("click",(function(){this.fertilizeIndex>0?m.workflow.deleteWorkByIndex(this.fertilizeIndex)&&(this.fertilizeIndex=0):this.fertilizeIndex=m.workflow.putInWorkflow(y.Reclamation,c.Farmland.fertilizeHours,n.onFertilize,n.onDoneFertilize,this),p()}),this),p())},a.onFinishReclamation=function(){this.buildIndex=0},a.setState=function(t){0==t&&(this.buildIndex=m.workflow.putInWorkflow(y.Reclamation,c.Farmland.workHours,null,this.onFinishReclamation,this))},e}(f)).prototype,"fertility",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),C=e(w.prototype,"moisture",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),I=w))||I);a._RF.pop()}}}));

System.register("chunks:///_virtual/Fruit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Managers.ts","./Enums.ts"],(function(t){var i,e,n,a,r,s,o,h,u,c,l,g,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Node,h=t.Input,u=t.Component},function(t){c=t.cf},function(t){l=t.mg},function(t){g=t.WorkTypeEnum,d=t.PropertysEnum}],execute:function(){var f,p,y,m,v;r._RF.push({},"11c68oxk4hBi4kY9VgPfebe","Fruit",void 0);var M=s.ccclass,_=s.property;t("Fruit",(f=M("Fruit"),p=_(o),f((v=i((m=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"hand",v,a(i)),i.plantName="",i.weight=void 0,i.plant=null,i.freshness=1,i.maturty=0,i.ageing=0,i._data=c.plant.eggPlant,i}e(i,t);var r=i.prototype;return r.start=function(){this.hand.active=!1,this.node.on(h.EventType.TOUCH_END,this.onClicked,this)},r.onDestroy=function(){this.node.off(h.EventType.TOUCH_END,this.onClicked,this)},r.onClicked=function(t){t.getUIStartLocation().x==t.getUILocation().x&&t.getUIStartLocation().y==t.getUILocation().y&&this.maturty>=1&&(this.hand.active?(this.hand.active=!1,l.workflow.deleteWorkByTypeAndTarget(g.GatheringEggs,this)):(this.hand.active=!0,l.workflow.putInWorkflow(g.GatheringEggs,0,null,this.onGathered,this))),t.propagationStopped=!0},r.onGathered=function(){this.hand.active=!1,this.plant=null,l.eventManager.emit(c.eventType.ON_GATHERING_ITEM,this.node)},r.dealWithRound=function(){if(!this.plant&&this.freshness>0&&(this.freshness-=.1,this.freshness<=0&&(this.freshness=0,this.rot())),this.plant&&this.maturty<1){var t=this.plant.land.getFarmFactor(),i=c.getNumByFactor(t,this._data.fruitMaturcityMin,this._data.fruitMaturcityMax),e=c.getNumByFactor(this.plant.genes.FruitWeightFactor,this._data.fruitWeightMin,this._data.fruitWeightMax);this.weight+=e/i,this.maturty+=1/i,this.maturty>=1&&this.setMature()}if(this.plant&&this.maturty>=1&&this.ageing<1){var n=1/c.getRandomInterval(this._data.fruitGetSeedsMin,this._data.fruitGetSeedsMax);if(this.ageing+=n,this.ageing>=1)for(var a=30+Math.round((this.weight-this._data.fruitWeightMin)/(this._data.fruitWeightMax-this._data.fruitWeightMin)*40)+c.getRandomInterval(0,30),r=0;r<a;r++)l.propertyItems.addSeeds(d[this.plantName+"Seed"],this.plant.genes)}},r.setMature=function(){},r.rot=function(){},i}(u)).prototype,"hand",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameWorld.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Managers.ts","./Config.ts","./Enums.ts","./Room.ts","./MarketLayer.ts","./Farmland.ts"],(function(e){var t,n,i,a,o,r,s,l,h,d,g,m,c,u,p,y,C,v,f,I,B,L,T,b,S;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,a=e.find,o=e.Camera,r=e.ScrollView,s=e.Label,l=e.Input,h=e.js,d=e.view,g=e.UITransform,m=e.v3,c=e.v2,u=e.instantiate,p=e.size,y=e.Sprite,C=e.Color,v=e.Component},function(e){f=e.mg},function(e){I=e.cf},function(e){B=e.PropertysEnum,L=e.OwnerEnum},function(e){T=e.Room},function(e){b=e.MarketLayer},function(e){S=e.Farmland}],execute:function(){var N;n._RF.push({},"80f00Lz2dpAh5ridqxSaCmn","GameWorld",void 0);var M=i.ccclass;i.property,e("GameWorld",M("GameWorld")(N=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).camera=null,t.cameraUI=null,t.map=null,t.marketLayer=null,t.roomLayer=null,t.animalLayer=null,t.dragImg=null,t.sideLayer=null,t.infoNode=null,t.buildContent=null,t.storage=null,t.logScroview=null,t.dateLabel=null,t.presssedItem=null,t.mapCameraMoveVec=null,t.dragItem=null,t._selectBuild="",t.propertyLabels={},t}t(n,e);var i=n.prototype;return i.onLoad=function(){this.camera=a("Canvas/Camera").getComponent(o),this.cameraUI=a("Canvas/CameraUI").getComponent(o),this.map=this.node.getChildByName("Map"),this.roomLayer=this.map.getChildByName("RoomLayer"),this.dragImg=this.map.getChildByName("DragImg"),this.marketLayer=this.roomLayer.getChildByName("MarketLayer").getComponent(b),this.animalLayer=this.map.getChildByName("AnimalLayer"),this.storage=this.roomLayer.getChildByPath("Storage"),this.sideLayer=this.node.getChildByPath("UI/SideLayer"),this.infoNode=this.sideLayer.getChildByName("InfoNode"),this.infoNode.children.forEach((function(e){return e.active=!1})),this.buildContent=this.sideLayer.getChildByName("BuildContent"),this.buildContent.active=!1,this.logScroview=this.node.getChildByPath("UI/LogScroview").getComponent(r);for(var e=this.node.getChildByPath("UI/FundsNode"),t=0;t<e.children.length;t++){var n=e.children[t],i=n.getComponent(s);i&&(this.propertyLabels[n.name]=i,this.updatePropertyItems(n.name.replace("Label","")))}this.dateLabel=this.node.getChildByPath("UI/DateNode/Label").getComponent(s),f.eventManager.on(I.eventType.ON_PRESSED_ITEM,this.onPressedItem.bind(this),this),f.eventManager.on(I.eventType.ON_UPDATE_PROPERTYITEM,this.updatePropertyItems.bind(this),this),f.eventManager.on(I.eventType.ON_SHOW_LOG,this.showLog.bind(this),this),f.eventManager.on(I.eventType.ON_DRAG_ANIMAL,this.onDragAnimal.bind(this),this),f.eventManager.on(I.eventType.ON_DRAG_ANIMAL_END,this.onDragAnimalEnd.bind(this),this),f.eventManager.on(I.eventType.ON_ITEM_DESTROY,this.onItemDestroy.bind(this),this),f.eventManager.on(I.eventType.ON_ADD_ANIMAL,this.onAddAnimal.bind(this),this),f.eventManager.on(I.eventType.ON_GATHERING_ITEM,this.moveIntoStorage.bind(this),this)},i.start=function(){this.map.on(l.EventType.TOUCH_START,this.onTouchBegan,this),this.map.on(l.EventType.TOUCH_END,this.onTouchLayerClick,this),this.map.on(l.EventType.TOUCH_CANCEL,this.onTouchLayerClick,this),this.map.on(l.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.map.on(l.EventType.MOUSE_WHEEL,this.onMouseWheel,this,!0),this.sideLayer.getChildByPath("NextBtn/Label").getComponent(s).string=I.langs.nextDay,this.sideLayer.getChildByPath("BuildBtn/Label").getComponent(s).string=I.langs.Build,this.updateDate();var e=this,t=this.buildContent.getChildByName("Label").getComponent(s);t.string=I.langs.selectBuildContentStr,this.buildContent.children.forEach((function(n){if(n!==t.node){var i=n.getChildByName("item");n.on(l.EventType.TOUCH_END,(function(a){n.name==e._selectBuild?(i.active=!1,e._selectBuild="",t.string=I.langs.selectBuildContentStr):(e.unSelectBuild(),e._selectBuild=n.name,i.active=!0,t.string=h.formatStr(I.langs.buildContentStr,I.langs[e._selectBuild])),a.propagationStopped=!0}))}})),this.sideLayer.on(l.EventType.TOUCH_END,(function(t){e.unSelectBuild(),t.propagationStopped=!0}))},i.updatePropertyItems=function(e,t){switch(e){case"Funds":t=t||f.propertyItems.getFunds(),this.propertyLabels.FundsLabel.string=""+t;break;case B.ChickenFodder:t=t||f.propertyItems.getItemQuatity(B.ChickenFodder),this.propertyLabels.ChickenFodderLabel.string=I.langs.ChickenFodder+": "+t+I.langs.Kilogram;break;case B.PigFodder:t=t||f.propertyItems.getItemQuatity(B.PigFodder),this.propertyLabels.PigFodderLabel.string=I.langs.PigFodder+": "+t+I.langs.Kilogram;break;case B.Fertilizer:t=t||f.propertyItems.getItemQuatity(B.Fertilizer),this.propertyLabels.FertilizerLabel.string=I.langs.Fertilizer+": "+t+I.langs.Kilogram;break;case"WorkHours":t=t||f.workflow.getWorkHour(),this.propertyLabels.WorkHoursLabel.string=t+" "+I.langs.WorkHour}},i.unSelectBuild=function(){this._selectBuild.length>0&&(this.buildContent.getChildByName(this._selectBuild).getChildByName("item").active=!1,this._selectBuild="",this.buildContent.getChildByName("Label").getComponent(s).string=I.langs.selectBuildContentStr)},i.moveIntoStorage=function(e){var t=this.node.getChildByPath("Views/Storage/Layout");t.addChild(e),e.layer=t.layer},i.onDragAnimal=function(e,t){var n=t.getLocation(),i=d.getVisibleSizeInPixel(),a=e.getComponent(g).getBoundingBox(),o=this.getMapScaleInCamera(),r=a.width*d.getScaleX()*o/2,s=a.height*d.getScaleY()*o/2,l=0,h=0;n.x<r?l=-1:n.x>i.width-r-this.sideLayer.getComponent(g).width*d.getScaleX()*o&&(l=1),n.y<s?h=-1:n.y>i.height-s&&(h=1);var c=t.getUIDelta();if(0!==l||0!==h){var u=10*l,p=10*h;this.mapCameraMoveVec=m(u,p,0),this.dragItem=e,0==l&&e.translate(m(c.x/o,0,0)),0==h&&e.translate(m(0,c.y/o,0))}else this.mapCameraMoveVec=null,e.translate(m(c.x/o,c.y/o,0))},i.onDragAnimalEnd=function(e){this.mapCameraMoveVec=null,this.dragItem=null;var t=e.node.getWorldPosition(),n=this.checkBoundingBoxForAnimal(t,e);n?n!==e.room&&(e.room.removeAnimal(e),n.addAnimal(e),e.node.setWorldPosition(t)):e.room.putAnimalInto(e)},i.checkBoundingBoxForAnimal=function(e,t){for(var n=this.roomLayer.children,i=0;i<n.length;i++){var a=n[i],o=a.getComponent(T);if(o&&-1!=o.className.indexOf(t.className)&&o.isAvailueble())if(a.getComponent(g).getBoundingBoxToWorld().contains(c(e.x,e.y)))return o}return null},i.UIPositionToMap=function(e){var t=this.cameraUI.worldToScreen(e);return t=this.camera.screenToWorld(t)},i.showLog=function(e){for(var t=this.logScroview.content.children,n=null,i=0;i<t.length;i++)if(!t[i].active){n=t[i];break}!n&&t.length<8&&(n=u(t[0])),t.length>=8?(n=t[0]).setSiblingIndex(7):(n.active=!0,this.logScroview.content.addChild(n)),n.getComponent(s).string=e},i.onMouseWheel=function(e){var t=e.getScrollY(),n=this.camera.orthoHeight-t;n=Math.min(n,this.camera.far),n=Math.max(n,this.camera.near),this.camera.orthoHeight=n},i.onPressedItem=function(e,t){this.presssedItem&&this.presssedItem!==e&&this.presssedItem.setUnChecked(),this.presssedItem=t?e:null,this.showPressItemInfo()},i.checkBoundingBoxOnRoomLayer=function(e){for(var t=this.roomLayer.children,n=0;n<t.length;n++){if(t[n].getComponent(g).getBoundingBox().contains(e))return!1}return!!this.map.getComponent(g).getBoundingBox().contains(e)},i.checkPoint=function(e){var t,n,i=e.getLocation(),a=this.camera.screenToWorld(m(i.x,i.y)),o=I.map[this._selectBuild].x,r=I.map[this._selectBuild].y;this.dragImg.getComponent(g).setContentSize(p(o*I.map.TileWidth,r*I.map.TileHeight)),t=o%2==0?(Math.round(a.x/I.map.TileWidth)-o/2+.5)*I.map.TileWidth:(Math.floor(a.x/I.map.TileWidth)-o/2+1)*I.map.TileWidth,n=r%2==0?(Math.round(a.y/I.map.TileHeight)-r/2+.5)*I.map.TileHeight:(Math.floor(a.y/I.map.TileHeight)-r/2+1)*I.map.TileHeight;for(var s=[],l=0;l<o;l++)for(var h=0;h<r;h++)s.push(c(t+l*I.map.TileWidth,n+h*I.map.TileHeight));t+=I.map.TileWidth*(o/2-.5),n+=I.map.TileHeight*(r/2-.5),this.dragImg.setWorldPosition(m(t,n));for(var d=!0,u=0;u<s.length;u++)this.checkBoundingBoxOnRoomLayer(s[u])||(d=!1);return this.sideLayer.getComponent(g).getBoundingBoxToWorld().contains(e.getUILocation())&&(d=!1),this.dragImg.getComponent(y).color=new C(d?"26DA42AF":"E71C4DAF"),d},i.onTouchBegan=function(e){this._selectBuild.length>0&&(this.dragImg.active=!0,this.checkPoint(e))},i.onTouchMoved=function(e){if(this._selectBuild.length>0)this.checkPoint(e);else{var t=this.getMapScaleInCamera(),n=e.getUIDelta().x/t,i=e.getUIDelta().y/t;this.camera.node.translate(m(-n,-i,0))}},i.onTouchLayerClick=function(e){if(this.dragImg.active=!1,this._selectBuild.length>0&&this.checkPoint(e)){var t=f.uiManager.getInstantByName(this._selectBuild);this.roomLayer.addChild(t),t.setWorldPosition(this.dragImg.getWorldPosition());var n=t.getComponent(T);n&&(n.owner=L.Player,n.setState(0));var i=t.getComponent(S);i&&i.setState(0)}},i.showPressItemInfo=function(){if(this.buildContent.active=!1,this.unSelectBuild(),this.presssedItem){this.infoNode.active=!0;for(var e=this.presssedItem.type+"Panel",t=this.infoNode.children,n=0;n<t.length;n++){var i=t[n];i.name==e?(this.presssedItem.ShowInfo(i),i.active=!0):i.active=!1}}else this.infoNode.active=!1},i.onItemDestroy=function(e){this.presssedItem===e&&(this.presssedItem=null,this.showPressItemInfo())},i.onAddAnimal=function(e){this.animalLayer.addChild(e.node)},i.getMapScaleInCamera=function(){return 360/this.camera.orthoHeight},i.updateDate=function(){var e=f.calendar.getCurrentDate(),t=I.seasons[f.calendar.getCurrentSeason()],n=I.weather[f.calendar.getCurrenWeather()],i=f.calendar.getSolarTerm();this.dateLabel.string=e+" "+t+"\n"+n+" "+i},i.onBuildBtn=function(){var e=this.buildContent.active;this.buildContent.active=!e,this.infoNode.active=e},i.onNext=function(){f.workflow.dealWithWorks(this.storage.worldPosition),this.dealWithRound(),this.showLog(I.langs.nextRound)},i.onShowStorage=function(e,t){var n="1"==t;this.node.getChildByName("UI").active=!n,this.camera.enabled=!n,this.node.getChildByName("Views").active=n},i.dealWithRound=function(){for(var e=this.roomLayer.children,t=0;t<e.length;t++){var n=e[t].getComponent(T);n&&n.dealWithRound();var i=e[t].getComponent(S);i&&i.dealWithRound()}this.marketLayer.dealWithRound(),this.showPressItemInfo(),f.calendar.increaseDate(),this.updateDate()},i.update=function(e){var t=0,n=0;this.mapCameraMoveVec&&(t=this.mapCameraMoveVec.x,n=this.mapCameraMoveVec.y);var i=this.map.getComponent(g).getBoundingBoxToWorld(),a=d.getViewportRect(),o=this.camera.screenToWorld(m(a.x,a.y)),r=this.camera.screenToWorld(m(a.width,a.height));o.x+t<i.x&&(t=i.x-o.x),o.y+n<i.y&&(n=i.y-o.y),r.x+t>i.width&&(t=i.width-r.x),r.y+n>i.height&&(n=i.height-r.y),this.camera.node.translate(m(t,n,0)),this.dragItem&&this.dragItem.translate(m(t,n,0))},n}(v))||N);n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts"],(function(r){var e,n,t,o,a,i,s;return{setters:[function(r){e=r.inheritsLoose},function(r){n=r.cclegacy,t=r._decorator,o=r.ProgressBar,a=r.director,i=r.Component},function(r){s=r.uiManager}],execute:function(){var c;n._RF.push({},"12892BbfLNPVKB/KgtKnbzB","LoadingLayer",void 0);var u=t.ccclass;t.property,r("LoadingLayer",u("LoadingLayer")(c=function(r){function n(){for(var e,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(e=r.call.apply(r,[this].concat(t))||this).pregressBar=null,e}e(n,r);var t=n.prototype;return t.onLoad=function(){},t.start=function(){var r=this;this.pregressBar=this.node.getChildByName("ProgressBar").getComponent(o),s.init((function(e,n){r.pregressBar.progress=n/e}),(function(){a.loadScene("GameWorld")}))},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BaseLayer.ts","./Calendar.ts","./Config.ts","./Enums.ts","./Managers.ts","./PropertyItems.ts","./TipLayer.ts","./Workflow.ts","./uiManager.ts","./Chicken.ts","./Pig.ts","./Animal.ts","./Farmland.ts","./Fruit.ts","./Plant.ts","./PressedItem.ts","./Room.ts","./ChickenEgg.ts","./Truffle.ts","./MarketGoods.ts","./Seed.ts","./ChickenRoom.ts","./PigRoom.ts","./Worker.ts","./GameWorld.ts","./LoadingLayer.ts","./MarketLayer.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Managers.ts",["cc","./Calendar.ts","./PropertyItems.ts","./uiManager.ts","./Workflow.ts"],(function(n){var a,e,r,t,o,c;return{setters:[function(n){a=n.cclegacy,e=n.EventTarget},function(n){r=n.calendar},function(n){t=n.propertyItems},function(n){o=n.uiManager},function(n){c=n.workflow}],execute:function(){a._RF.push({},"1f26a8NoxdP/qVNNG5vh5As","Managers",void 0);var u=new e;n("mg",{eventManager:u,uiManager:o,calendar:r,propertyItems:t,workflow:c});window.log=function(){for(var n=1,a=[null,"#3db53a","#aeb53a","#3a5ab5","#b13ab5","#b5663a","#b53a3a"],e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var o=r[r.length-1];"number"==typeof o&&o>0&&o<=a.length&&(n=o,r.pop()),console.log("%c "+r+" ","background: "+a[n-1]+";padding: 1px;color: #fff;")},a._RF.pop()}}}));

System.register("chunks:///_virtual/MarketGoods.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PressedItem.ts","./Config.ts","./Managers.ts","./Enums.ts"],(function(){var t,e,n,o,r,s,i,a,c,d;return{setters:[function(e){t=e.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,o=t.EditBox,r=t.Label,s=t.js},function(t){i=t.PressedItem},function(t){a=t.cf},function(t){c=t.mg},function(t){d=t.PropertysEnum}],execute:function(){var g;e._RF.push({},"92ea9M6n85D9LjNtNC2Kk4U","MarketGoods",void 0);var u=n.ccclass;n.property,u("MarketGoods")(g=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var i=n.prototype;return i.start=function(){e.prototype.start.call(this),this.type="MarketGoods"},i.ShowInfo=function(t){var e,n=t.getChildByName("EditBox").getComponent(o),i=t.getChildByName("BuyBtn"),g=i.getChildByName("Label").getComponent(r),u=t.getChildByName("InfoLabel").getComponent(r),l=this.node.name,f=1;-1!=l.indexOf("Fodder")?e=a.langs.Kilogram:-1!=l.indexOf("Seed")&&(e=a.langs.HundredGrain),n.string="",n.node.off("text-changed"),n.node.on("text-changed",(function(){n.string.length>0&&(f=parseInt(n.string),g.string=s.formatStr(a.langs.buyingButtonText,f,e))}),this),i.off("click"),i.on("click",(function(){c.propertyItems.deductFunds(a.marketPrice[l]*f,s.formatStr(a.langs.shopping,a.langs[l]))&&(-1!=l.indexOf("Seed")?c.propertyItems.addItems(d[l],100*f):c.propertyItems.addItems(d[l],f))}),this),g.string=s.formatStr(a.langs.buyingButtonText,f,e),n.placeholder=a.langs.buyingCountReplace,u.string=a.langs[l]+": "+(a.marketPrice[l]+a.langs.fund)+"/"+e},n}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/MarketLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Managers.ts","./Room.ts","./Animal.ts","./Enums.ts"],(function(t){var r,e,n,a,o,i,s,u,c;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,a=t.Component},function(t){o=t.cf},function(t){i=t.mg},function(t){s=t.Room},function(t){u=t.Animal},function(t){c=t.OwnerEnum}],execute:function(){var m;e._RF.push({},"6ee72KLKhRJFZYziVzWpVYo","MarketLayer",void 0);var l=n.ccclass;n.property,t("MarketLayer",l("MarketLayer")(m=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){this.refreshMarket()},n.refreshMarket=function(){for(var t=this.node.children,r=0;r<t.length;r++){var e=t[r].getComponent(s);if(e){for(var n=e.animalList.length-1;n>=0;n--){e.animalList[n].removeFromRoom()}for(var a=e.className.replace("Room",""),m=Math.floor(Math.random()*(o.marketData[a].refreshCountMax-o.marketData[a].refreshCountMin)+o.marketData[a].refreshCountMin),l=0;l<m;l++){var f=i.uiManager.getInstantByName(a).getComponent(u);i.eventManager.emit(o.eventType.ON_ADD_ANIMAL,f),e.addAnimal(f),e.putAnimalInto(f);var h=Math.random()<o.marketData.sickPigRate,M={weightFactor:o.normalDistribution(0,100),sickFactor:o.normalDistribution(0,100),consumeFactor:o.normalDistribution(0,100),adultFactor:o.normalDistribution(0,100)};f.setAll(c.Market,M,h)}}}},n.dealWithRound=function(){this.refreshMarket()},e}(a))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/Pig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Managers.ts","./Animal.ts","./Config.ts","./Enums.ts"],(function(t){var e,i,n,a,r,s,h,o,g;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,a=t.js},function(t){r=t.mg},function(t){s=t.Animal},function(t){h=t.cf},function(t){o=t.OwnerEnum,g=t.AnimalGenderEnum}],execute:function(){var l;i._RF.push({},"4b3f5PdChVNHbdWXoYFlQMu","Pig",void 0);var d=n.ccclass;n.property,t("Pig",d("Pig")(l=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).lactationPeriod=0,e.isPregnant=!1,e.deleveryPeriod=0,e.pregnantDays=0,e.babysGene=[],e._data=h.pig,e.className="Pig",e.room=null,e}e(i,t);var n=i.prototype;return n.getGainWeightByFacts=function(){var t=this.age,e=(Math.max(0,this.weightFactor),(Math.min(100,this.weightFactor)-50)/50),i=24-Math.round(3*e),n=49-Math.round(6*e),a=180-Math.round(12*e),r=240-Math.round(16*e),s=365+Math.round(24*e),o=1277+Math.round(96*e),g=0,l=e*h.getRandomInterval(.05,.1);if(t<i)g=.3*(1+l)+(2*t/i-1)*(.3*i/o);else if(t<n){g=.57*(1+l)+(2*t/n-1)*(.57*(n-i)/o)}else if(t<a){g=.6*(1+l)+(2*t/a-1)*(.6*(a-n)/o)}else if(t<r){g=.67*(1+l)+(2*t/r-1)*(.67*(r-a)/o)}else if(t<s){g=.88*(1+l)+(2*t/s-1)*(.88*(s-r)/o)}else if(t<o){g=.186*(1+l)+(2*t/o-1)*(.186*(o-s)/o)}return g},n.start=function(){t.prototype.start.call(this)},n.getConsumeByGain=function(t){if(this.isPregnant){var e=this.babysGene.length,i=this.pregnantDays+this.deleveryPeriod;return 8*((this._data.birthWeightMax-this._data.birthWeightMin)/2*e/i+t)/3}return 8*t/3},n.gainWeight=function(t){if(this.weight+=t,this.isPregnant){for(var e=0,i=this.babysGene.length,n=this.pregnantDays+this.deleveryPeriod,a=(this._data.birthWeightMax-this._data.birthWeightMin)/2*i/n,r=0;r<this.babysGene.length;r++)e+=this.babysGene[r].gene.weightFactor;for(var s=0;s<this.babysGene.length;s++)this.babysGene[s].weight+=this.babysGene[s].gene.weightFactor/e*a}},n.getPregnant=function(t){this.deleveryPeriod=h.getRandomInterval(this._data.deleveryPeriodMim,this._data.deleveryPeriodMax),this.isPregnant=!0;for(var e=h.getRandomInterval(this._data.deliveryCountMin,this._data.deliveryCountMax),i=0;i<e;i++){var n=s.inheriteProperty(this,t);this.babysGene.push({gene:n,weight:0})}},n.getExtraInfo=function(){var t="\nweightFactor:"+this.weightFactor+"\nconsumeFactor"+this.sickFactor+"\nsickFactor"+this.sickFactor;return(this.isPregnant?a.formatStr(h.langs.pregnantStr,this.pregnantDays):"")+t},n.delivery=function(){for(var t=0;t<this.babysGene.length;t++){var e=this.babysGene[t],n=r.uiManager.getInstantByName(this.className).getComponent(i);r.eventManager.emit(h.eventType.ON_ADD_ANIMAL,n),this.room.addAnimal(n),this.room.putAnimalInto(n);var a=this.sickValue>0,s=e.weight;n.setAll(o.Player,e.gene,a,s)}this.babysGene=[],this.isPregnant=!1,this.pregnantDays=0,this.lactationPeriod=h.getRandomInterval(this._data.lactationPeriodMin,this._data.lactationPeriodMax)},n.dealWithRound=function(){if(this.gender==g.Female&&this.isAdult()&&!this.isPregnant&&this.lactationPeriod<=0){for(var e=this.room.animalList,i=[],n=0;n<e.length;n++)e[n].gender==g.Male&&i.push(e[n]);if(i.length>0&&Math.random()<this._data.pregnantRate){var a=Math.floor(Math.random()*i.length);this.getPregnant(i[a])}}this.lactationPeriod>0&&this.lactationPeriod--,this.isPregnant&&(this.deleveryPeriod--,this.pregnantDays++,0==this.deleveryPeriod&&this.delivery()),t.prototype.dealWithRound.call(this)},i}(s))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/PigRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Room.ts","./Config.ts"],(function(t){var o,e,i,r,n,a,c,l,s;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,c=t.Prefab},function(t){l=t.Room},function(t){s=t.cf}],execute:function(){var u,f,p,m,g;n._RF.push({},"2e34eki76pIu7cBP3/w6EfM","PigRoom",void 0);var P=a.ccclass,y=a.property;t("PigRoom",(u=P("PigRoom"),f=y(c),u((g=o((m=function(t){function o(){for(var o,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return o=t.call.apply(t,[this].concat(n))||this,i(o,"truffleFab",g,r(o)),o.animalList=[],o.className="PigRoom",o.AnimalName="Pig",o.truffleList=[],o._data=s.PigRoom,o}return e(o,t),o.prototype.start=function(){t.prototype.start.call(this)},o}(l)).prototype,"truffleFab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=m))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/Plant.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Fruit.ts","./Enums.ts","./Config.ts","./Managers.ts","./PressedItem.ts"],(function(t){var n,e,i,a,o,r,s,u,l,c,h,f,d,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Node,u=t.Label,l=t.js},function(t){c=t.Fruit},function(t){h=t.WorkTypeEnum},function(t){f=t.cf},function(t){d=t.mg},function(t){g=t.PressedItem}],execute:function(){var p,m,v,y,C;o._RF.push({},"13d4drxMDhLmbVznzchqE/L","Plant",void 0);var F=r.ccclass,R=r.property;t("Plant",(p=F("Plant"),m=R([s]),p((C=n((y=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).plantName="",n.genes=null,n.type="Plant",n.age=0,n.land=null,n.lifespan=0,n.produceFruitCount=0,n.totalFruitCount=0,n._data=f.plant.eggPlant,i(n,"fruits",C,a(n)),n}e(n,t);var o=n.prototype;return o.start=function(){this.lifespan=f.getRandomInterval(this._data.lifespanMin,this._data.lifespanMax),this.totalFruitCount=f.getNumByFactor(this.genes.FruitCountFactor,this._data.fruitCountTotalMin,this._data.fruitCountTotalMax),t.prototype.start.call(this)},o.setWithered=function(){},o.getIsWithered=function(){return this.age>=this.lifespan},o.isMature=function(){var t=f.getNumByFactor(this.genes.MatureFactor,this._data.maturcityMin,this._data.maturcityMax);return this.age>=t},o.produceFruit=function(){for(var t=0;t<this.fruits.length&&this.produceFruitCount<this.totalFruitCount;t++)if(0==this.fruits[t].children.length){var n=d.uiManager.getInstantByName("Fruit");this.fruits[t].addChild(n),this.produceFruitCount++}},o.dealWithRound=function(){this.age++,this.age>=this.lifespan?this.setWithered():this.isMature()&&(this.produceFruit(),this.fruits.forEach((function(t){var n=t.children[0];n&&n.getComponent(c)&&n.getComponent(c).dealWithRound()})))},o.onRemoved=function(){this.fruits.forEach((function(t){var n=t.children[0];n&&n.getComponent(c)&&n.getComponent(c).onGathered()})),this.land.removePlant()},o.ShowInfo=function(t){var n=this,e=t.getChildByName("RemoveBtn"),i=e.getChildByName("Label").getComponent(u),a=t.getChildByName("InfoLabel").getComponent(u),o=f.langs[this.plantName];a.string=l.formatStr(f.langs.plantInfo,o,this.age);var r=d.workflow.findWorkByTypeAndTarget(h.RemovePlant,this);i.string=r>0?f.langs.Cancel+f.langs.Remove:f.langs.Remove,e.off("click"),e.on("click",(function(){r>0?(d.workflow.deleteWorkByIndex(r),r=0):r=d.workflow.putInWorkflow(h.RemovePlant,0,null,n.onRemoved,n),i.string=r>0?f.langs.Cancel+f.langs.Remove:f.langs.Remove}))},n}(g)).prototype,"fruits",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/PressedItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Managers.ts","./Config.ts"],(function(t){var n,e,o,i,s,r,a,c,h,u,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,c=t.Input,h=t.Component},function(t){u=t.mg},function(t){p=t.cf}],execute:function(){var f,g,T,d,E;s._RF.push({},"c1846nzExBNO6O+eqyS8JyZ","PressedItem",void 0);var y=r.ccclass,v=r.property;t("PressedItem",(f=y("PressedItem"),g=v(a),f((E=n((d=function(t){function n(){for(var n,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,o(n,"checkMark",E,i(n)),n.type="PressedItem",n.isDraging=!1,n}e(n,t);var s=n.prototype;return s.onLoad=function(){},s.start=function(){this.node.on(c.EventType.TOUCH_START,this.onDragBegan,this),this.node.on(c.EventType.TOUCH_MOVE,this.onDrag,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},s.onDestroy=function(){u.eventManager.emit(p.eventType.ON_ITEM_DESTROY,this),this.node.off(c.EventType.TOUCH_START,this.onDragBegan,this),this.node.off(c.EventType.TOUCH_MOVE,this.onDrag,this),this.node.off(c.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},s.onDragBegan=function(t){this.isDraging=!0},s.onDrag=function(t){},s.onDragEnd=function(){},s.onTouchEnd=function(t){if(this.isDraging=!1,t.getUIStartLocation().x==t.getUILocation().x&&t.getUIStartLocation().y==t.getUILocation().y){var n=!this.checkMark.active;this.checkMark.active=n,u.eventManager.emit(p.eventType.ON_PRESSED_ITEM,this,n),t.propagationStopped=!0}else this.onDragEnd()},s.setUnChecked=function(){this.checkMark.active=!1},s.ShowInfo=function(t){},n}(h)).prototype,"checkMark",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=d))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/PropertyItems.ts",["cc","./Managers.ts","./Config.ts","./Seed.ts","./Enums.ts"],(function(t){var e,i,n,s,r,u,o,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.log,s=t.js},function(t){r=t.mg},function(t){u=t.cf},function(t){o=t.Seed},function(t){a=t.PropertysEnum}],execute:function(){var d,c;e._RF.push({},"49b3298SlpF4ZRH4rcPOCuh","PropertyItems",void 0);var f=i.ccclass,h=(i.property,f("PropertyItems")(((c=function(){function t(){return this.itemList={},this.funds=0,t._instance||(t._instance=this,this.init()),t._instance}var e=t.prototype;return e.init=function(){this.funds=1e3,this.itemList[a.PigFodder]=0,this.itemList[a.ChickenFodder]=0,this.itemList[a.Fertilizer]=0,this.itemList[a.EggPlantSeed]=[]},e.getPlantSeed=function(t){if("object"==typeof this.itemList[t])return this.itemList[t].pop()},e.getFunds=function(){return this.funds},e.addSeeds=function(t,e){this.itemList[t]&&this.itemList[t].unshift(new o(t,e))},e.addItems=function(t,e){if(n("name",t,this.itemList[t]),n("quatity",e),"number"==typeof this.itemList[t])this.itemList[t]+=e,r.eventManager.emit(u.eventType.ON_UPDATE_PROPERTYITEM,t);else if("object"==typeof this.itemList[t])for(var i=0;i<e;i++)this.addSeeds(t)},e.deducItem=function(t,e){if(this.itemList[t]&&"number"==typeof this.itemList[t]){if(this.itemList[t]>=e)return this.itemList[t]-=Math.ceil(10*e)/10,r.eventManager.emit(u.eventType.ON_UPDATE_PROPERTYITEM,t),!0;r.uiManager.showToast(s.formatStr(u.langs.lackFodderTip,u.langs[t]))}else n("ERROR: 没这个东西：",t);return!1},e.getItemQuatity=function(t){return"number"==typeof this.itemList[t]?this.itemList[t].toFixed(2):"object"==typeof this.itemList[t]?this.itemList[t].length:void 0},e.addFunds=function(t,e){t=Math.floor(10*t)/10,this.funds=(10*this.funds+10*t)/10,r.eventManager.emit(u.eventType.ON_SHOW_LOG,e+s.formatStr(u.langs.addFunds,t)),r.eventManager.emit(u.eventType.ON_UPDATE_PROPERTYITEM,"Funds")},e.deductFunds=function(t,e){return t=Math.ceil(10*t)/10,this.funds>=t?(this.funds=(10*this.funds-10*t)/10,r.eventManager.emit(u.eventType.ON_SHOW_LOG,e+s.formatStr(u.langs.deductFunds,t)),r.eventManager.emit(u.eventType.ON_UPDATE_PROPERTYITEM,"Funds"),!0):(r.uiManager.showToast(u.langs.lackofFundsStr),!1)},e.checkIfEnoughFund=function(t,e){return t=Math.ceil(10*t)/10,this.funds>=t||(e&&r.uiManager.showToast(u.langs.lackofFundsStr),!1)},t}())._instance=void 0,d=c))||d);t("propertyItems",new h);e._RF.pop()}}}));

System.register("chunks:///_virtual/Room.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Managers.ts","./Config.ts","./Enums.ts","./PressedItem.ts"],(function(e){var t,n,o,i,s,a,r,l,d,h,g,u,c,m,f,k;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.log,s=e.Label,a=e.ToggleContainer,r=e.Toggle,l=e.Button,d=e.js,h=e.UITransform},function(e){g=e.mg},function(e){u=e.cf},function(e){c=e.WorkTypeEnum,m=e.OwnerEnum,f=e.PropertysEnum},function(e){k=e.PressedItem}],execute:function(){var p;n._RF.push({},"98fb3bIWeFFWLzUSkYjpilH","Room",void 0);var B=o.ccclass;o.property;i("Item",k);e("Room",B("Room")(p=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).roomId="",t.animalList=[],t.buildWorkIndex=0,t.baseWorkIndex=0,t.age=0,t.className="Room",t.AnimalName="Animal",t.level=1,t.owner=m.Market,t._data=u.Room,t.materia=1,t.Base=null,t.excrement=0,t}t(n,e);var o=n.prototype;return o.start=function(){e.prototype.start.call(this),this.type="Room"},o.onDestroy=function(){this.buildWorkIndex>0&&g.workflow.deleteWorkByIndex(this.buildWorkIndex),this.baseWorkIndex>0&&g.workflow.deleteWorkByIndex(this.baseWorkIndex),e.prototype.onDestroy.call(this)},o.ShowInfo=function(e){var t=this,n=e.getChildByName("Label1").getComponent(s),o=e.getChildByName("InfoLabel").getComponent(s),h=e.getChildByName("ToggleGroup").getComponent(a),f=e.getChildByName("BuildBase"),k=e.getChildByName("CleanBtn"),p=e.getChildByName("CancelBuild"),B=f.getChildByName("Label").getComponent(s),I=p.getChildByName("Label").getComponent(s);if(e.getChildByPath("ToggleGroup/Toggle1/Label").getComponent(s).string=u.langs.wood,e.getChildByPath("ToggleGroup/Toggle2/Label").getComponent(s).string=u.langs.cement,k.active=this.excrement>0,this.excrement>0){var C=k.getChildByName("Label").getComponent(s),W=g.workflow.findWorkByTypeAndTarget(c.Cleaning,this);C.string=W?u.langs.Cancel:u.langs.Clean,k.off("click"),k.on("click",(function(){W>0?(g.workflow.deleteWorkByIndex(W),W=null):W=g.workflow.putInWorkflow(c.Cleaning,t._data.cleanWorkHour,null,this.onDoneClean,this),C.string=W?u.langs.Cancel:u.langs.Clean}),this)}var w=h.node.children;i("container",h);var x=w[0].getComponent(r),b=w[1].getComponent(r),y=this.buildWorkIndex>0&&!g.workflow.isWorkProcessing(this.buildWorkIndex);if(y?(x.node.off("toggle"),x.node.on("toggle",(function(){t.materia=1,t.setState(0)}),this),b.node.off("toggle"),b.node.on("toggle",(function(){t.materia=2,t.setState(0)}),this),I.string=u.langs.CancelBuild):I.string=u.langs.TearDown,x.enabled=y,b.enabled=y,f.getComponent(l).interactable=m.Player&&!this.Base,B.string=this.baseWorkIndex>0?u.langs.CancelBase:u.langs.BuildBase,f.active=this.owner==m.Player,p.active=this.owner==m.Player,this.owner==m.Market)o.string=d.formatStr(u.langs.MarketRoom,u.langs[this.className]);else{var v=d.formatStr(u.langs.roomInfo,u.langs[this.className],this.age,this.animalList.length);this.getIsCrowded()&&(v+="/n"+u.langs.crowdedStr),o.string=v,f.off("click"),f.on("click",(function(){t.setState(1),B.string=t.baseWorkIndex>0?u.langs.CancelBase:u.langs.BuildBase}),this),p.off("click"),p.on("click",(function(){this.buildWorkIndex>0?g.workflow.isWorkProcessing(this.buildWorkIndex)?g.uiManager.showToast(u.langs.workProcessing):t.node.destroy():i("teardown")}),this)}n.string=u.langs.chooseMaterial},o.getIsCrowded=function(){var e=this.animalList.length-this._data.maxAnimalCount;return e<=0?0:Math.round(10*e/this._data.maxAnimalCount)},o.getActiveRect=function(){return this.node.getComponent(h).getBoundingBoxToWorld()},o.addAnimal=function(e){this.animalList.push(e),e.room=this},o.putAnimalInto=function(e){if(e.originPos)e.node.setWorldPosition(e.originPos);else{var t=e.getComponent(h),n=this.node.getComponent(h).width-t.width,o=this.node.getComponent(h).height-t.height,i=this.node.getWorldPosition(),s=Math.floor((Math.random()-.5)*n)+i.x,a=Math.floor((Math.random()-.5)*o)+i.y;e.node.setWorldPosition(s,a,0)}},o.removeAnimal=function(e){var t=this.animalList.indexOf(e);this.animalList.splice(t,1),e.room=null},o.gainExcrement=function(e){this.excrement+=e},o.dealWithRound=function(){if(!(this.buildWorkIndex>0)){for(var e=0;e<this.animalList.length;e++)this.animalList[e].dealWithRound();this.age++}},o.getUpgradeNeedFunds=function(){return this.level*u.roomUpgradNeeds},o.onBuildFinished=function(){i("onBuildFinished"),this.buildWorkIndex=0},o.onBaseFinished=function(){i("onBaseFinished"),this.Base=99999,this.baseWorkIndex=0},o.onDoneClean=function(){g.propertyItems.addItems(f.Fertilizer,this.excrement),this.excrement=0},o.isAvailueble=function(){return!this.buildWorkIndex&&!this.baseWorkIndex},o.setState=function(e){if(0==e){var t=1==this.materia?this._data.woodBuildHour:this._data.cementBuildHour,n=1==this.materia?this._data.woodBuildPrice:this._data.cementBuildPrice,o=function(){var e=u.langs.Build+u.langs[this.className];return g.propertyItems.deductFunds(n,e)};this.buildWorkIndex?g.workflow.changeWorkByIndex(this.buildWorkIndex,c.Build,t,o,this.onBuildFinished,this):this.buildWorkIndex=g.workflow.putInWorkflow(c.Build,t,o,this.onBuildFinished,this)}else if(1==e)if(this.baseWorkIndex)g.workflow.deleteWorkByIndex(this.baseWorkIndex)&&(this.baseWorkIndex=0);else{var i=this._data.basePrice;this.baseWorkIndex=g.workflow.putInWorkflow(c.Build,this._data.baseBuildHour,(function(){var e=u.langs.Build+u.langs[this.className];return g.propertyItems.deductFunds(i,e)}),this.onBaseFinished,this)}},n}(k))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/Seed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts"],(function(e){var t,n,i,r,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e._decorator},function(e){a=e.cf}],execute:function(){var o,c,u,s,l;i._RF.push({},"496d2mfUXtKdoztnS9bcHLO","Seed",void 0);var p=r.ccclass,f=r.property;e("Seed",p("Seed")((u=t((c=function(){function e(e,t){this.gene=null,n(this,"PlantName",u,this),n(this,"germinationPeriod",s,this),n(this,"minSuccessRate",l,this),this.baseWeight=1,this.PlantName=e,this.gene=t||{FruitCountFactor:a.getRandomInterval(0,100),FruitWeightFactor:a.getRandomInterval(0,100),PlantWeightFactor:a.getRandomInterval(0,100),MatureFactor:a.getRandomInterval(0,100)}}return e.prototype.successRate=function(){return this.minSuccessRate},e}()).prototype,"PlantName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=t(c.prototype,"germinationPeriod",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),l=t(c.prototype,"minSuccessRate",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.75}}),o=c))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/TipLayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseLayer.ts"],(function(t){var e,n,i,r,l,a,c,o,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){l=t.cclegacy,a=t._decorator,c=t.Label,o=t.Node,u=t.Input},function(t){s=t.BaseLayer}],execute:function(){var b,h,p,f,y,C,L,k,g,_,S;l._RF.push({},"76805KNDYJLV7WqtAChByox","TipLayer",void 0);var d=a.ccclass,v=a.property;t("TipLayer",(b=d("TipLayer"),h=v(c),p=v(c),f=v(o),y=v(o),b((k=e((L=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return e=t.call.apply(t,[this].concat(l))||this,i(e,"titleLb",k,r(e)),i(e,"contentLb",g,r(e)),i(e,"btnSure",_,r(e)),i(e,"btnCancel",S,r(e)),e._callbackSure=null,e._callbackCancel=null,e}n(e,t);var l=e.prototype;return l.start=function(){},l.showTip=function(t){this.titleLb.string=t.title||"提示",this.contentLb.string=t.content||"";var e=t.noBtn;this.btnCancel.active=!e,this.btnSure.active=!e,e?this.mask.on(u.EventType.TOUCH_END,this.hide,this):(this.btnCancel.getComponentInChildren(c).string=t.cancelStr||"取消",this.btnSure.getComponentInChildren(c).string=t.sureStr||"确定",this._callbackCancel=t.callbackCancel,this._callbackSure=t.callbackSure,this.mask.off(u.EventType.TOUCH_END,this.hide,this))},l.onClickSure=function(){this._callbackSure&&this._callbackSure(),this.hide()},l.onClickCancel=function(){this._callbackCancel&&this._callbackCancel(),this.hide()},e}(s)).prototype,"titleLb",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(L.prototype,"contentLb",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(L.prototype,"btnSure",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(L.prototype,"btnCancel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/Truffle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./Managers.ts","./Enums.ts"],(function(t){var i,e,r,n,o,l,u,a,s,c,f,p,y,d,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,u=t.SpriteFrame,a=t.Sprite,s=t.Input,c=t.tween,f=t.v3,p=t.Component},function(t){y=t.cf},function(t){d=t.mg},function(t){h=t.QualityLevelEnum}],execute:function(){var m,g,v,q,S,b,I,T,C;o._RF.push({},"c099eQDmp5Hrolfp/13C96+","Truffle",void 0);var D=l.ccclass,L=l.property;t("Truffle",(m=D("Truffle"),g=L(u),v=L(u),q=L(a),m((I=i((b=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,r(i,"qualityGold",I,n(i)),r(i,"qualityIridium",T,n(i)),r(i,"qualitySp",C,n(i)),i.room=null,i.quality=h.Normal,i}e(i,t);var o=i.prototype;return o.start=function(){this.node.on(s.EventType.TOUCH_END,this.onClicked,this)},o.onDestroy=function(){this.node.off(s.EventType.TOUCH_END,this.onClicked,this)},o.setQuality=function(t){t==h.Normal?this.qualitySp.node.active=!1:t==h.Silver||(t==h.Gold?this.qualitySp.spriteFrame=this.qualityGold:t==h.Iridium&&(this.qualitySp.spriteFrame=this.qualityIridium)),this.quality=t},o.getPrice=function(){return y.trufflePrice+this.quality*y.trufflePrice},o.onClicked=function(t){t.getUIStartLocation().x==t.getUILocation().x&&t.getUIStartLocation().y==t.getUILocation().y&&(d.propertyItems.addFunds(this.getPrice(),y.langs.saleTruffle),c(this.node).by(.2,{position:f(0,50,0)}).removeSelf().start(),this.room.removeTruffle(this)),t.propagationStopped=!0},i}(p)).prototype,"qualityGold",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(b.prototype,"qualityIridium",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(b.prototype,"qualitySp",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=b))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./BaseLayer.ts","./TipLayer.ts"],(function(e){var t,n,a,i,s,r,o,c,u,h,f,l;return{setters:[function(e){t=e.cclegacy,n=e._decorator,a=e.instantiate,i=e.log,s=e.resources,r=e.Prefab,o=e.director,c=e.Label,u=e.tween,h=e.v3},function(e){f=e.BaseLayer},function(e){l=e.TipLayer}],execute:function(){var g,y;t._RF.push({},"682b5v9KpZLWbcLTVlJAGGC","uiManager",void 0);var p=n.ccclass,_=(n.property,p("UiManager")(((y=function(){function e(){return this._layers={},this._Prefabs={TipLayer:r,Toast:r,Pig:r,Chicken:r,PigRoom:r,ChickenRoom:r,Truffle:r,ChickenEgg:r,Farmland:r,EggPlant:r,Fruit:r},e._instance||(e._instance=this),e._instance}var t=e.prototype;return t.getInstantByName=function(e){return this._Prefabs[e]?a(this._Prefabs[e]):(i("没有此预制件:",e),null)},t.init=function(e,t){s.loadDir("prefabs",r,(function(t,n,a){e(n,t)}),function(e,n){i(e);for(var a=0;a<n.length;a++)this._Prefabs[n[a].name]=n[a];t()}.bind(this))},t.showLayer=function(e,t){if(this._layers[e]){var n=this._layers[e].getComponent(f);n&&n.show(),t&&t(this._layers[e])}else{var i=a(this._Prefabs[e]);o.getScene().getChildByName("Canvas").addChild(i);var s=i.getComponent(f);s&&s.show(),t&&t(i),this._layers[e]=i}},t.showTip=function(e){this.showLayer("TipLayer",(function(t){t.getComponent(l).showTip(e)}))},t.showToast=function(e){this.showLayer("Toast",(function(t){t.getChildByName("content").getComponent(c).string=e||"",u(t).set({scale:h(0,0,1)}).to(.2,{scale:h(1,1,1)},{easing:"backOut"}).delay(3).to(.2,{scale:h(0,0,1)},{easing:"backIn"}).start()}))},e}())._instance=void 0,g=y))||g);e("uiManager",new _);t._RF.pop()}}}));

System.register("chunks:///_virtual/Worker.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"f6521FHcjxMkIldHuabLhSJ","Worker",void 0);i("default",function(){function i(){this.experience=void 0,this.mood=void 0,this.efficiency=void 0,this.attendance=void 0,this.position=void 0,this.satisfaction=void 0,this.personalityTraits=void 0,this.onLeave=void 0,this.workHours=void 0,this.experience=0,this.mood=100,this.efficiency=1,this.attendance=0,this.position="worker",this.satisfaction=100,this.personalityTraits=[],this.onLeave=!1,this.workHours=8}var t=i.prototype;return t.interact=function(){this.mood<100&&(this.mood+=5*Math.random())},t.gainExperience=function(i){this.experience+=i},t.calculateWorkHours=function(){this.onLeave?this.workHours=0:this.workHours=8*this.efficiency},t.requestLeave=function(){this.onLeave=!0},t.returnToWork=function(){this.onLeave=!1},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Workflow.ts",["cc","./Managers.ts","./Config.ts","./Enums.ts"],(function(n){var r,e,o,i,t,s,g;return{setters:[function(n){r=n.cclegacy,e=n._decorator,o=n.log,i=n.Vec3},function(n){t=n.mg},function(n){s=n.cf},function(n){g=n.WorkTypeEnum}],execute:function(){var a,d;r._RF.push({},"43abaubQ6pKYbSvorue/nEu","Workflow",void 0);var c=e.ccclass,h=(e.property,c("Workflow")(((d=function(){function n(){return this.workHours=28800,this.pendingWorks=[],this.index=0,n._instance||(n._instance=this),n._instance}var r=n.prototype;return r.getWorkHour=function(){return this.workHours/3600},r.putInWorkflow=function(n,r,e,o,i){var s={index:++this.index,rigidHour:r,onProcess:e,type:n,target:i,process:!1};t.eventManager.once("Workflow"+this.index,o,i);for(var a=!1,d=0;d<this.pendingWorks.length;d++)this.pendingWorks[d][0].type==n&&n!=g.Build&&(this.pendingWorks[d].push(s),a=!0);return a||this.pendingWorks.push([s]),this.index},r.setWorkPriority=function(n,r){},r.isWorkProcessing=function(n){for(var r=0;r<this.pendingWorks.length;r++)for(var e=0;e<this.pendingWorks[r].length;e++){var i=this.pendingWorks[r][e];if(n==i.index)return i.process}o("NO such workflow:",n)},r.changeWorkByIndex=function(n,r,e,o,i,g){for(var a=0;a<this.pendingWorks.length;a++)for(var d=0;d<this.pendingWorks[a].length;d++){var c=this.pendingWorks[a][d];if(n==c.index){if(c.process)return t.uiManager.showToast(s.langs.workProcessing),!1;i&&(t.eventManager.off("Workflow"+n),t.eventManager.once("Workflow"+n,i,g));var h={index:n,rigidHour:e,onProcess:o,type:r,target:g||c.target,process:!1};return this.pendingWorks[a][d]=h,!0}}},r.findWorkByTypeAndTarget=function(n,r){for(var e=0;e<this.pendingWorks.length;e++)for(var o=0;o<this.pendingWorks[e].length;o++){var i=this.pendingWorks[e][o];if(i.type==n&&i.target==r)return i.index}return 0},r.deleteWorkByIndex=function(n){for(var r=0;r<this.pendingWorks.length;r++)for(var e=0;e<this.pendingWorks[r].length;e++){var o=this.pendingWorks[r][e];if(n==o.index)return o.process?(t.uiManager.showToast(s.langs.workProcessing),!1):(t.eventManager.off("Workflow"+o.index),this.pendingWorks[r].splice(e,1),0==this.pendingWorks[r].length&&this.pendingWorks.splice(r,1),!0)}},r.deleteWorkByTypeAndTarget=function(n,r){for(var e=this.pendingWorks.length-1;e>=0;e++)for(var o=0;o<this.pendingWorks[e].length;o++){var i=this.pendingWorks[e][o];if(n==i.type&&r===i.target)return i.process?(t.uiManager.showToast(s.langs.workProcessing),!1):(this.pendingWorks.splice(e,1),!0)}},r.dealWithWorks=function(n){for(var r=0,e=this.workHours,s=n;this.pendingWorks.length>0&&e>0;){for(var g=Number.MAX_VALUE,a=this.pendingWorks[0],d=void 0,c=0;c<a.length;c++){var h=i.distance(s,a[c].target.node.getWorldPosition());h<g&&(g=h,d=a[c])}d.onProcess&&d.onProcess.call(d.target)&&(d.onProcess=null);var p=g/2;if(e-=p,r+=p,s=d.target.node.getWorldPosition(),!(e>=d.rigidHour)){e>0&&(d.rigidHour-=e,d.process=!0);break}e-=d.rigidHour,t.eventManager.emit("Workflow"+d.index),a.splice(a.indexOf(d),1),0==a.length&&this.pendingWorks.splice(0,1)}o("用于通勤时间：",r)},n}())._instance=void 0,a=d))||a);n("workflow",new h);r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});